import{k as P,n as k}from"./chunk-J5EBYDYS.js";import"./chunk-6SXWHGJK.js";import{n as w,s as E,x as M}from"./chunk-K7YEKGTU.js";import{Ja as g,Mb as d,Nb as o,Ob as e,Pb as y,bb as s,cc as h,gc as v,hc as C,ic as x,lb as f,oc as m,rb as u,rc as t,sc as b,tc as _,xb as c}from"./chunk-LZGG6COP.js";import{f as p}from"./chunk-2WH2EVR6.js";var I=["dosCanvas"];function D(a,n){a&1&&(o(0,"div",10)(1,"div",11),t(2,"\u{1F431}"),e(),o(3,"p"),t(4,"Sharpening claws..."),e()())}function A(a,n){if(a&1&&(o(0,"div",12)(1,"p"),t(2),e(),o(3,"p",13),t(4,"To play, you need the "),o(5,"code"),t(6,"alley-cat.jsdos"),e(),t(7," bundle in "),o(8,"code"),t(9,"assets/games/"),e(),t(10,"."),e()()),a&2){let r=h();s(2),b(r.error)}}function L(a,n){a&1&&(o(0,"div",14)(1,"h3"),t(2,"Controls"),e(),o(3,"div",15)(4,"div",16)(5,"span",17),t(6,"Arrows"),e(),t(7," Move / Jump"),e(),o(8,"div",16)(9,"span",17),t(10,"Space"),e(),t(11," Action"),e()()())}var O=class a{constructor(n){this.platformId=n;this.isBrowser=M(this.platformId)}dosCanvas;dosInstance=null;isLoading=!0;error=null;isBrowser;ngAfterViewInit(){return p(this,null,function*(){if(this.isBrowser)try{yield this.loadLocalJsDos(),this.initializeEmulator()}catch(n){console.error("Failed to initialize js-dos:",n),this.error="Failed to initialize emulator. Local assets missing or blocked.",this.isLoading=!1}})}loadLocalJsDos(){return new Promise((n,r)=>{if(window.Dos){n();return}let i=document.createElement("link");i.rel="stylesheet",i.href="js-dos.css",document.head.appendChild(i);let l=document.createElement("script");l.src="js-dos.js",l.onload=()=>n(),l.onerror=r,document.head.appendChild(l)})}initializeEmulator(){if(!this.dosCanvas)return;let n=window.Dos;if(!n){this.error="Dos factory not found.",this.isLoading=!1;return}this.dosInstance=n(this.dosCanvas.nativeElement),this.dosInstance.run("assets/games/alley-cat.jsdos").then(()=>{this.isLoading=!1}).catch(r=>{console.error("Error running game:",r),this.error="Error loading Alley Cat bundle. Make sure assets/games/alley-cat.jsdos exists.",this.isLoading=!1})}ngOnDestroy(){this.isBrowser&&this.dosInstance&&this.dosInstance.stop()}static \u0275fac=function(r){return new(r||a)(f(g))};static \u0275cmp=u({type:a,selectors:[["app-alley-cat"]],viewQuery:function(r,i){if(r&1&&v(I,7),r&2){let l;C(l=x())&&(i.dosCanvas=l.first)}},decls:14,vars:10,consts:[["dosCanvas",""],[1,"alley-cat-container"],[1,"game-header"],["routerLink","/games",1,"back-btn"],[1,"status-badge"],[1,"emulator-wrapper"],[1,"dos-canvas-container"],["class","loader-overlay",4,"ngIf"],["class","error-container",4,"ngIf"],["class","controls-guide",4,"ngIf"],[1,"loader-overlay"],[1,"pixel-cat"],[1,"error-container"],[1,"instruction"],[1,"controls-guide"],[1,"keys-grid"],[1,"key-item"],[1,"key"]],template:function(r,i){r&1&&(o(0,"div",1)(1,"div",2)(2,"button",3),t(3,"\u2190 Back to Arcade"),e(),o(4,"h1"),t(5,"Alley Cat"),e(),o(6,"div",4),t(7),e()(),o(8,"div",5),y(9,"div",6,0),c(11,D,5,0,"div",7),e(),c(12,A,11,1,"div",8)(13,L,12,0,"div",9),e()),r&2&&(s(6),m("loading",i.isLoading)("error",i.error),s(),_(" ",i.isLoading?"Loading Emulator...":i.error?"Error":"Running"," "),s(),m("hidden",i.error),s(3),d("ngIf",i.isLoading),s(),d("ngIf",i.error),s(),d("ngIf",!i.error))},dependencies:[E,w,k,P],styles:[".alley-cat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem;min-height:calc(100vh - 80px);background:#0a0a0a;color:#fff}.game-header[_ngcontent-%COMP%]{width:100%;max-width:800px;display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.back-btn[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);color:#fff;padding:.5rem 1rem;border-radius:8px;cursor:pointer;transition:all .3s ease}.back-btn[_ngcontent-%COMP%]:hover{background:#fff3}.status-badge[_ngcontent-%COMP%]{padding:.3rem .8rem;border-radius:20px;font-size:.8rem;font-weight:700;background:#27ae60}.status-badge.loading[_ngcontent-%COMP%]{background:#f39c12}.status-badge.error[_ngcontent-%COMP%]{background:#e74c3c}.emulator-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:800px;aspect-ratio:4 / 3;background:#000;border:4px solid #333;border-radius:8px;overflow:hidden;box-shadow:0 0 50px #00000080}.dos-canvas-container[_ngcontent-%COMP%]{width:100%;height:100%}.loader-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#000;z-index:10}.pixel-cat[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_bounce .5s infinite alternate}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translateY(0)}to{transform:translateY(-10px)}}.error-container[_ngcontent-%COMP%]{text-align:center;margin-top:4rem;color:#e74c3c}.instruction[_ngcontent-%COMP%]{color:#888;margin-top:1rem}.controls-guide[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.keys-grid[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-top:1rem}.key[_ngcontent-%COMP%]{background:#333;padding:.2rem .6rem;border-radius:4px;border-bottom:3px solid #111;font-family:monospace;margin-right:.5rem}.hidden[_ngcontent-%COMP%]{display:none}"]})};export{O as AlleyCatComponent};
