import{s as S}from"./chunk-K7YEKGTU.js";import{Qb as r,Rb as h,Sb as u,ab as o,ac as v,bb as c,gc as w,hc as k,ic as P,rb as b,rc as n,tc as f}from"./chunk-LZGG6COP.js";import"./chunk-2WH2EVR6.js";var E=["gameCanvas"],C=class m{canvasRef;ctx;width=600;height=500;paddleSpeed=7;ball={x:300,y:400,dx:4,dy:-4,radius:6};paddle={x:250,y:480,width:100,height:10};bricks=[];score=0;lives=3;gameInterval;isGameOver=!1;isPaused=!1;hasStarted=!1;rightPressed=!1;leftPressed=!1;colors={bg:"#0d1117",paddle:"#58a6ff",ball:"#c9d1d9",brickIf:"#d2a8ff",brickFor:"#79c0ff",brickClass:"#ff7b72",text:"#c9d1d9"};ngOnInit(){this.initGame()}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d"),this.draw()}ngOnDestroy(){this.stopGame()}initGame(){this.score=0,this.lives=3,this.isGameOver=!1,this.isPaused=!1,this.hasStarted=!1,this.resetBall(),this.initBricks(),this.ctx&&this.draw()}initBricks(){this.bricks=[];let t=5,e=8,i=10,s=50,a=35,p=(this.width-a*2-i*(e-1))/e,x=20,y=["class","for","if","var","const"],g=[this.colors.brickClass,this.colors.brickFor,this.colors.brickIf,"#7ee787","#f2cc60"];for(let d=0;d<e;d++)for(let l=0;l<t;l++)this.bricks.push({x:d*(p+i)+a,y:l*(x+i)+s,width:p,height:x,active:!0,type:y[l%y.length],color:g[l%g.length]})}resetBall(){this.ball={x:this.width/2,y:this.height-30,dx:4,dy:-4,radius:6},this.paddle.x=(this.width-this.paddle.width)/2}startGame(){this.hasStarted||(this.hasStarted=!0,this.gameInterval=setInterval(()=>this.update(),16))}stopGame(){this.gameInterval&&(clearInterval(this.gameInterval),this.gameInterval=null)}keyDownHandler(t){t.key==="Right"||t.key==="ArrowRight"?(this.rightPressed=!0,t.preventDefault()):t.key==="Left"||t.key==="ArrowLeft"?(this.leftPressed=!0,t.preventDefault()):t.key===" "?(this.togglePause(),t.preventDefault()):t.key==="Enter"&&this.isGameOver&&(this.initGame(),this.startGame()),!this.hasStarted&&(this.rightPressed||this.leftPressed||t.key===" ")&&this.startGame()}keyUpHandler(t){t.key==="Right"||t.key==="ArrowRight"?this.rightPressed=!1:(t.key==="Left"||t.key==="ArrowLeft")&&(this.leftPressed=!1)}togglePause(){!this.hasStarted||this.isGameOver||(this.isPaused=!this.isPaused,this.isPaused?this.stopGame():this.gameInterval=setInterval(()=>this.update(),16))}update(){if(!(this.isPaused||this.isGameOver)){if(this.rightPressed&&this.paddle.x<this.width-this.paddle.width?this.paddle.x+=this.paddleSpeed:this.leftPressed&&this.paddle.x>0&&(this.paddle.x-=this.paddleSpeed),this.ball.x+=this.ball.dx,this.ball.y+=this.ball.dy,(this.ball.x+this.ball.dx>this.width-this.ball.radius||this.ball.x+this.ball.dx<this.ball.radius)&&(this.ball.dx=-this.ball.dx),this.ball.y+this.ball.dy<this.ball.radius)this.ball.dy=-this.ball.dy;else if(this.ball.y+this.ball.dy>this.height-this.ball.radius)if(this.ball.x>this.paddle.x&&this.ball.x<this.paddle.x+this.paddle.width){this.ball.dy=-this.ball.dy;let t=this.ball.x-(this.paddle.x+this.paddle.width/2);this.ball.dx=t*.15}else this.lives--,this.lives?(this.resetBall(),this.hasStarted=!1,this.stopGame()):(this.isGameOver=!0,this.stopGame());for(let t of this.bricks)t.active&&this.ball.x>t.x&&this.ball.x<t.x+t.width&&this.ball.y>t.y&&this.ball.y<t.y+t.height&&(this.ball.dy=-this.ball.dy,t.active=!1,this.score+=10,this.score===this.bricks.length*10&&(this.initBricks(),this.ball.dx*=1.1,this.ball.dy*=1.1));this.draw()}}draw(){this.ctx.fillStyle=this.colors.bg,this.ctx.fillRect(0,0,this.width,this.height),this.bricks.forEach(t=>{t.active&&(this.ctx.fillStyle=t.color,this.ctx.fillRect(t.x,t.y,t.width,t.height),this.ctx.fillStyle="rgba(0,0,0,0.5)",this.ctx.font="10px Arial",this.ctx.fillText(t.type,t.x+5,t.y+14))}),this.ctx.fillStyle=this.colors.paddle,this.ctx.fillRect(this.paddle.x,this.paddle.y,this.paddle.width,this.paddle.height),this.ctx.beginPath(),this.ctx.arc(this.ball.x,this.ball.y,this.ball.radius,0,Math.PI*2),this.ctx.fillStyle=this.colors.ball,this.ctx.fill(),this.ctx.closePath(),!this.hasStarted&&!this.isGameOver?this.drawOverlay("SYNTAX BREAKER","Press Space or Arrow Keys to Start"):this.isGameOver?this.drawOverlay("COMPILATION FAILED","Press Enter to Restart"):this.isPaused&&this.drawOverlay("DEBUGGING...","Press Space to Resume")}drawOverlay(t,e){this.ctx.fillStyle="rgba(13, 17, 23, 0.8)",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle=this.colors.text,this.ctx.font="30px Courier New",this.ctx.textAlign="center",this.ctx.fillText(t,this.width/2,this.height/2-20),this.ctx.font="16px Courier New",this.ctx.fillText(e,this.width/2,this.height/2+20)}static \u0275fac=function(e){return new(e||m)};static \u0275cmp=b({type:m,selectors:[["app-syntax-breaker"]],viewQuery:function(e,i){if(e&1&&w(E,7),e&2){let s;k(s=P())&&(i.canvasRef=s.first)}},hostBindings:function(e,i){e&1&&v("keydown",function(a){return i.keyDownHandler(a)},o)("keyup",function(a){return i.keyUpHandler(a)},o)},decls:13,vars:2,consts:[["gameCanvas",""],[1,"game-wrapper"],[1,"game-header"],[1,"stat"],["width","600","height","500"],[1,"controls-hint"]],template:function(e,i){e&1&&(r(0,"div",1)(1,"div",2)(2,"div",3),n(3),h(),r(4,"div",3),n(5),h()(),u(6,"canvas",4,0),r(8,"div",5)(9,"p"),n(10,"Use \u2B05\uFE0F\u27A1\uFE0F to move paddle. SPACE to pause."),h(),r(11,"p"),n(12,"Break the monolithic code blocks!"),h()()()),e&2&&(c(3),f("REFACTORED: ",i.score," lines"),c(2),f("LIVES: ",i.lives))},dependencies:[S],styles:[".game-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background-color:#0d1117;color:#c9d1d9;font-family:Courier New,Courier,monospace}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:600px;margin-bottom:1rem;font-weight:700}canvas[_ngcontent-%COMP%]{border:2px solid #30363d;background-color:#0d1117;box-shadow:0 0 20px #00000080}.controls-hint[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-size:.9rem;color:#8b949e}.controls-hint[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}"]})};export{C as SyntaxBreakerComponent};
