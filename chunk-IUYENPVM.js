import{a as R}from"./chunk-KKCGGUOQ.js";import"./chunk-6SXWHGJK.js";import{m as V,n as L,s as W}from"./chunk-K7YEKGTU.js";import{Mb as f,Nb as c,Ob as l,Pb as y,Wb as w,ab as I,ac as x,bb as o,cc as v,gc as P,hc as A,ic as G,ja as h,ka as g,lb as M,nc as C,oc as k,rb as O,rc as p,sc as j,tc as u,x as E,xb as S}from"./chunk-LZGG6COP.js";import{a as b}from"./chunk-2WH2EVR6.js";var _=class{state;canvasWidth;canvasHeight;wordList=["hola","mundo","angular","typescript","javascript","code","space","invaders","keyboard","mouse","screen","pixel","galaxy","star","planet","rocket","laser","blast","score","level","game","over","play","pause","stop","start","function","variable","constant","array","object","class","interface","module","component","service","pipe","directive","guard","resolver","route"];recentWords=[];spawnRate=2e3;lastSpawnTime=0;animationFrameId=null;onStateChange;soundManager;constructor(e,t,i,n){this.canvasWidth=e,this.canvasHeight=t,this.onStateChange=i,this.soundManager=n,this.state=this.getInitialState()}setWordList(e){let t=[...new Set(e.map(i=>i.toLowerCase()).filter(i=>i.length>2))];t.length>0&&(this.wordList=t)}getInitialState(){return{score:0,level:1,lives:3,isGameOver:!1,enemies:[],projectiles:[],explosions:[],currentInput:""}}startGame(){this.state=this.getInitialState(),this.lastSpawnTime=performance.now(),this.loop()}stopGame(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}handleInput(e){if(this.state.isGameOver)return;let t=e.toLowerCase();if(!/^[a-z]$/.test(t))return;let i=this.state.currentInput+t,n=this.state.enemies.find(r=>r.word.startsWith(i));n&&(this.state.currentInput+=t,this.spawnProjectile(n),this.soundManager?.playShoot(),this.checkInput()),this.onStateChange(b({},this.state))}backspace(){this.state.isGameOver||(this.state.currentInput=this.state.currentInput.slice(0,-1),this.onStateChange(b({},this.state)))}clearInput(){this.state.currentInput="",this.onStateChange(b({},this.state))}checkInput(){let e=this.state.enemies.findIndex(t=>t.word===this.state.currentInput);if(e!==-1){let t=this.state.enemies[e];this.spawnExplosion(t.x,t.y),this.soundManager?.playExplosion(),this.state.enemies.splice(e,1),this.state.score+=10*this.state.level,this.state.currentInput="",this.state.score>0&&this.state.score%100===0&&(this.state.level++,this.spawnRate=Math.max(500,2e3-this.state.level*100))}}spawnProjectile(e){this.state.projectiles.push({id:Date.now()+Math.random(),x:this.canvasWidth/2,y:this.canvasHeight-60,targetId:e.id,targetLastX:e.x,targetLastY:e.y,speed:20})}spawnExplosion(e,t){this.state.explosions.push({id:Date.now()+Math.random(),x:e,y:t,createdAt:performance.now()})}loop=()=>{if(this.state.isGameOver)return;let e=performance.now(),t=16;e-this.lastSpawnTime>this.spawnRate&&(this.spawnEnemy(),this.lastSpawnTime=e),this.updateEnemies(t),this.updateProjectiles(),this.updateExplosions(e),this.onStateChange(b({},this.state)),this.animationFrameId=requestAnimationFrame(this.loop)};spawnEnemy(){let e="",t=0;do e=this.wordList[Math.floor(Math.random()*this.wordList.length)],t++;while(this.recentWords.includes(e)&&t<10);this.recentWords.push(e),this.recentWords.length>10&&this.recentWords.shift();let i=Math.random()*(this.canvasWidth-100)+50,n={id:Date.now()+Math.random(),word:e,x:i,y:-20,speed:.5+this.state.level*.1,color:this.getRandomColor()};this.state.enemies.push(n)}updateEnemies(e){let t=this.canvasWidth/2,i=this.canvasHeight-60,n=60,r=60;for(let a=this.state.enemies.length-1;a>=0;a--){let d=this.state.enemies[a];if(d.y+=d.speed,d.y+20>=i&&d.y<=i+r&&d.x>=t-n/2&&d.x<=t+n/2){this.spawnExplosion(d.x,d.y),this.soundManager?.playExplosion(),this.state.enemies.splice(a,1),this.state.lives--,this.state.lives<=0&&(this.state.isGameOver=!0,this.stopGame());continue}d.y>this.canvasHeight&&(this.state.enemies.splice(a,1),this.state.lives--,this.state.lives<=0&&(this.state.isGameOver=!0,this.stopGame()))}}updateProjectiles(){for(let e=this.state.projectiles.length-1;e>=0;e--){let t=this.state.projectiles[e],i=this.state.enemies.find(T=>T.id===t.targetId),n=t.targetLastX,r=t.targetLastY;i&&(n=i.x,r=i.y,t.targetLastX=n,t.targetLastY=r);let a=n-t.x,d=r-t.y,m=Math.sqrt(a*a+d*d);m<t.speed?this.state.projectiles.splice(e,1):(t.x+=a/m*t.speed,t.y+=d/m*t.speed)}}updateExplosions(e){this.state.explosions=this.state.explosions.filter(t=>e-t.createdAt<500)}getRandomColor(){let e=["#ff00cc","#3333ff","#00ff00","#ffff00","#00ffff"];return e[Math.floor(Math.random()*e.length)]}};var D=["gameArea"];function z(s,e){if(s&1&&(c(0,"div",16)(1,"span",17),p(2),l(),p(3),l()),s&2){let t=e.$implicit,i=v();C("left",t.x,"px")("top",t.y,"px")("color",t.color),o(2),j(i.getMatchedPart(t.word)),o(),u("",i.getUnmatchedPart(t.word)," ")}}function N(s,e){if(s&1&&y(0,"div",18),s&2){let t=e.$implicit;C("left",t.x,"px")("top",t.y,"px")}}function H(s,e){if(s&1&&y(0,"div",19),s&2){let t=e.$implicit;C("left",t.x,"px")("top",t.y,"px")}}function Y(s,e){if(s&1&&(c(0,"div",20),p(1),l()),s&2){let t=v();o(),u(" ",t.state.currentInput," ")}}function X(s,e){if(s&1){let t=w();c(0,"div",21)(1,"h2"),p(2,"GAME OVER"),l(),c(3,"p"),p(4),l(),c(5,"button",22),x("click",function(){h(t);let n=v();return g(n.startGame())}),p(6,"RESTART"),l()()}if(s&2){let t=v();o(4),u("Final Score: ",t.state.score)}}function B(s,e){if(s&1){let t=w();c(0,"div",21)(1,"h2"),p(2,"SPACE TYPER"),l(),c(3,"p"),p(4,"Type the falling words to destroy them!"),l(),c(5,"button",22),x("click",function(){h(t);let n=v();return g(n.startGame())}),p(6,"START GAME"),l()()}}var F=class s{constructor(e){this.tipsService=e}gameArea;engine;state={score:0,level:1,lives:3,isGameOver:!1,enemies:[],projectiles:[],explosions:[],currentInput:""};gameStarted=!1;soundEnabled=!0;musicEnabled=!0;currentTrackIndex=0;audioCtx=null;musicInterval;tracks=[{name:"Retro Arcade",tempo:150,notes:[220,0,220,0,261,0,220,0,196,0,196,0,220,0,261,0]},{name:"Cyber Chase",tempo:120,notes:[330,330,0,330,0,261,330,0,392,0,0,0,196,0,0,0,261,0,0,196,0,0,164,0,0,220,0,246,233,220,0,196]},{name:"Neon Pulse",tempo:100,notes:[440,0,440,0,440,0,349,0,523,0,440,0,349,0,523,0,440,0,0,0,659,0,659,0,659,0,698,0,523,0,415,0,349,0,523,0,440,0,0,0]},{name:"Hyper Drive",tempo:90,notes:[587,0,587,0,587,0,587,0,523,0,587,0,659,0,587,0,783,0,783,0,783,0,659,0,587,0,523,0,493,0,523,0]},{name:"Galactic Sprint",tempo:80,notes:[880,0,783,0,659,0,587,0,523,0,493,0,440,0,392,0,440,440,0,440,523,523,0,523,659,659,0,659,880,880,0,0]}];ngOnInit(){this.initAudio(),this.engine=new _(800,600,e=>{this.state=e},this),this.loadWordsFromTips()}ngOnDestroy(){this.engine&&this.engine.stopGame(),this.stopMusic(),this.audioCtx&&this.audioCtx.close()}initAudio(){try{this.audioCtx=new(window.AudioContext||window.webkitAudioContext)}catch{console.error("Web Audio API not supported")}}loadWordsFromTips(){let t=this.tipsService.getAllTips().slice(0,20).map(i=>this.tipsService.getTipContent(i));E(t).subscribe(i=>{let n=new Set;["algorithm","angular","api","array","async","await","backend","biome","boolean","browser","buffer","cache","class","client","closure","code","commit","component","const","container","controller","cookie","database","debug","deploy","devops","docker","domain","element","endpoint","engine","error","event","export","express","fetch","filter","framework","frontend","function","git","github","global","graph","guard","header","hook","html","http","https","import","index","inject","input","interface","javascript","json","jwt","kernel","keyboard","latency","layer","let","library","linux","local","loop","map","memory","method","middleware","model","module","mongo","mouse","network","node","null","object","observable","output","package","param","parser","patch","path","pixel","platform","plugin","port","promise","protocol","provider","proxy","public","push","query","queue","react","redis","redux","refactor","regex","reject","render","request","response","rest","return","route","router","rxjs","schema","scope","script","server","service","session","shell","socket","source","sql","stack","state","static","status","storage","stream","string","style","subscribe","switch","syntax","system","table","tag","target","task","template","terminal","test","thread","token","type","typescript","undefined","update","url","user","value","variable","version","view","void","watch","web","window","worker","xml","yaml"].forEach(a=>n.add(a)),i.forEach(a=>{let d=/`([^`]+)`/g,m;for(;(m=d.exec(a))!==null;)this.processCodeContent(m[1],n);let T=/```[\s\S]*?```/g;for(;(m=T.exec(a))!==null;){let q=m[0].replace(/```[a-z]*\n?|```/g,"");this.processCodeContent(q,n)}}),n.size>0&&(console.log(`Loaded ${n.size} technical words from tips`),this.engine.setWordList(Array.from(n)))})}processCodeContent(e,t){e.split(/[^a-zA-Z]+/).forEach(n=>{let r=n.toLowerCase();r.length>3&&r.length<15&&!this.isBannedWord(r)&&t.add(r)})}isBannedWord(e){return new Set(["this","that","with","from","have","what","when","where","which","your","para","como","este","esta","esto","pero","porque","todo","nada","algo","bien","mal","solo","cada","otro","otra","unos","unas","poco","mucho","ejemplo","prueba","test","demo","hola","mundo","hello","world","foobar","lorem","ipsum","dolor","sit","amet"]).has(e)}startGame(){this.audioCtx?.state==="suspended"&&this.audioCtx.resume(),this.gameStarted=!0,this.engine.startGame(),this.startMusic()}toggleSound(){this.soundEnabled=!this.soundEnabled}toggleMusic(){this.musicEnabled=!this.musicEnabled,this.musicEnabled&&this.gameStarted&&!this.state.isGameOver?this.startMusic():this.stopMusic()}changeTrack(){this.currentTrackIndex=(this.currentTrackIndex+1)%this.tracks.length,this.musicEnabled&&this.gameStarted&&!this.state.isGameOver&&(this.stopMusic(),this.startMusic())}getCurrentTrackName(){return this.tracks[this.currentTrackIndex].name}playShoot(){if(!this.soundEnabled||!this.audioCtx)return;let e=this.audioCtx.createOscillator(),t=this.audioCtx.createGain();e.type="square",e.frequency.setValueAtTime(880,this.audioCtx.currentTime),e.frequency.exponentialRampToValueAtTime(110,this.audioCtx.currentTime+.1),t.gain.setValueAtTime(.1,this.audioCtx.currentTime),t.gain.exponentialRampToValueAtTime(.01,this.audioCtx.currentTime+.1),e.connect(t),t.connect(this.audioCtx.destination),e.start(),e.stop(this.audioCtx.currentTime+.1)}playExplosion(){if(!this.soundEnabled||!this.audioCtx)return;let e=this.audioCtx.createOscillator(),t=this.audioCtx.createGain();e.type="sawtooth",e.frequency.setValueAtTime(100,this.audioCtx.currentTime),e.frequency.exponentialRampToValueAtTime(.01,this.audioCtx.currentTime+.3),t.gain.setValueAtTime(.2,this.audioCtx.currentTime),t.gain.exponentialRampToValueAtTime(.01,this.audioCtx.currentTime+.3),e.connect(t),t.connect(this.audioCtx.destination),e.start(),e.stop(this.audioCtx.currentTime+.3)}startMusic(){if(!this.musicEnabled||!this.audioCtx||this.musicInterval)return;let e=this.tracks[this.currentTrackIndex],t=e.notes,i=0;this.musicInterval=setInterval(()=>{if(!this.musicEnabled||this.state.isGameOver){this.stopMusic();return}let n=t[i];if(n>0&&this.audioCtx){let r=this.audioCtx.createOscillator(),a=this.audioCtx.createGain();r.type="square",r.frequency.setValueAtTime(n,this.audioCtx.currentTime),a.gain.setValueAtTime(.05,this.audioCtx.currentTime),a.gain.exponentialRampToValueAtTime(.01,this.audioCtx.currentTime+.1),r.connect(a),a.connect(this.audioCtx.destination),r.start(),r.stop(this.audioCtx.currentTime+.1)}i=(i+1)%t.length},e.tempo)}stopMusic(){this.musicInterval&&(clearInterval(this.musicInterval),this.musicInterval=null)}onKeyDown(e){!this.gameStarted||this.state.isGameOver||(e.key==="Backspace"?this.engine.backspace():e.key==="Escape"?this.engine.clearInput():e.key.length===1&&this.engine.handleInput(e.key))}getMatchedPart(e){return e.startsWith(this.state.currentInput)?this.state.currentInput:""}getUnmatchedPart(e){return e.startsWith(this.state.currentInput)?e.slice(this.state.currentInput.length):e}static \u0275fac=function(t){return new(t||s)(M(R))};static \u0275cmp=O({type:s,selectors:[["app-space-typer"]],viewQuery:function(t,i){if(t&1&&P(D,7),t&2){let n;A(n=G())&&(i.gameArea=n.first)}},decls:25,vars:14,consts:[["gameArea",""],[1,"game-wrapper",3,"keydown"],[1,"game-header"],[1,"stats-group"],[1,"stat"],[1,"controls-group"],["title","Toggle Sound Effects",1,"icon-btn",3,"click"],["title","Toggle Music",1,"icon-btn",3,"click"],["title","Change Music Track",1,"track-btn",3,"click"],[1,"game-area"],["class","enemy",3,"left","top","color",4,"ngFor","ngForOf"],["class","projectile",3,"left","top",4,"ngFor","ngForOf"],["class","explosion",3,"left","top",4,"ngFor","ngForOf"],[1,"player-ship"],["class","current-input",4,"ngIf"],["class","game-over-overlay",4,"ngIf"],[1,"enemy"],[1,"matched-part"],[1,"projectile"],[1,"explosion"],[1,"current-input"],[1,"game-over-overlay"],[1,"restart-btn",3,"click"]],template:function(t,i){if(t&1){let n=w();c(0,"div",1),x("keydown",function(a){return h(n),g(i.onKeyDown(a))},I),c(1,"div",2)(2,"div",3)(3,"div",4),p(4),l(),c(5,"div",4),p(6),l(),c(7,"div",4),p(8),l()(),c(9,"div",5)(10,"button",6),x("click",function(){return h(n),g(i.toggleSound())}),p(11," \u{1F50A} "),l(),c(12,"button",7),x("click",function(){return h(n),g(i.toggleMusic())}),p(13," \u{1F3B5} "),l(),c(14,"button",8),x("click",function(){return h(n),g(i.changeTrack())}),p(15),l()()(),c(16,"div",9,0),S(18,z,4,8,"div",10)(19,N,1,4,"div",11)(20,H,1,4,"div",12),y(21,"div",13),S(22,Y,2,1,"div",14)(23,X,7,1,"div",15)(24,B,7,0,"div",15),l()()}t&2&&(o(4),u("SCORE: ",i.state.score),o(2),u("LEVEL: ",i.state.level),o(2),u("LIVES: ",i.state.lives),o(2),k("off",!i.soundEnabled),o(2),k("off",!i.musicEnabled),o(3),u(" ",i.getCurrentTrackName()," \u23E9 "),o(3),f("ngForOf",i.state.enemies),o(),f("ngForOf",i.state.projectiles),o(),f("ngForOf",i.state.explosions),o(2),f("ngIf",i.state.currentInput),o(),f("ngIf",i.state.isGameOver),o(),f("ngIf",!i.gameStarted&&!i.state.isGameOver))},dependencies:[W,V,L],styles:[`.game-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background-color:#000;color:#fff;font-family:Courier New,Courier,monospace;overflow:hidden;position:relative}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:800px;padding:1rem;z-index:10;background:#00000080;border-bottom:1px solid #333}.stats-group[_ngcontent-%COMP%]{display:flex;gap:2rem}.controls-group[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.stat[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.icon-btn[_ngcontent-%COMP%]{background:none;border:1px solid #555;color:#fff;font-size:1.2rem;cursor:pointer;padding:.5rem;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;transition:all .3s}.icon-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-color:#fff}.icon-btn.off[_ngcontent-%COMP%]{opacity:.5;text-decoration:line-through}.track-btn[_ngcontent-%COMP%]{background:none;border:1px solid #555;color:#fff;font-family:Courier New,Courier,monospace;font-size:.9rem;cursor:pointer;padding:.5rem 1rem;border-radius:20px;transition:all .3s;white-space:nowrap}.track-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-color:#fff}.game-area[_ngcontent-%COMP%]{position:relative;width:100%;max-width:800px;height:600px;border:2px solid #333;background:radial-gradient(circle at center,#1a1a2e,#000);overflow:hidden}.enemy[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%);font-size:1.2rem;font-weight:700;text-shadow:0 0 5px currentColor;white-space:nowrap;transition:top .1s linear}.player-ship[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);width:60px;height:60px;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2300ffcc"><path d="M12 2L2 22h20L12 2zm0 3.5L18.5 20h-13L12 5.5z"/></svg>') no-repeat center center;background-size:contain;filter:drop-shadow(0 0 10px #00ffcc)}.projectile[_ngcontent-%COMP%]{position:absolute;width:4px;height:10px;background:#0fc;box-shadow:0 0 5px #0fc;border-radius:2px;transform:translate(-50%)}.explosion[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;background:radial-gradient(circle,#fff,#ff0055,transparent);border-radius:50%;transform:translate(-50%,-50%);animation:_ngcontent-%COMP%_explode .5s ease-out forwards;opacity:0}@keyframes _ngcontent-%COMP%_explode{0%{transform:translate(-50%,-50%) scale(.1);opacity:1}to{transform:translate(-50%,-50%) scale(2);opacity:0}}.current-input[_ngcontent-%COMP%]{position:absolute;bottom:80px;left:50%;transform:translate(-50%);font-size:2rem;color:#fff;text-shadow:0 0 10px #fff;background:#000000b3;padding:.5rem 1rem;border-radius:8px;border:1px solid #555}.game-over-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#000000d9;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:20}.game-over-overlay[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;color:#f05;margin-bottom:1rem;text-transform:uppercase;letter-spacing:5px}.restart-btn[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.5rem;background:#33f;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:background .3s}.restart-btn[_ngcontent-%COMP%]:hover{background:#55f}.matched-part[_ngcontent-%COMP%]{color:#f05}`]})};export{F as SpaceTyperComponent};
