import{n as z,s as _,x as V}from"./chunk-K7YEKGTU.js";import{Ja as O,Mb as x,Nb as p,Ob as c,Qb as r,Rb as n,Sb as a,Wb as b,ab as P,ac as h,bb as u,bc as E,cc as R,gc as C,hc as y,ic as M,ja as d,ka as m,lb as G,qa as S,rb as g,rc as l,sc as T,uc as L,xb as k}from"./chunk-LZGG6COP.js";import"./chunk-2WH2EVR6.js";var w=class v{closeEvent=new S;close(){this.closeEvent.emit()}static \u0275fac=function(e){return new(e||v)};static \u0275cmp=g({type:v,selectors:[["app-game-rules-modal"]],outputs:{closeEvent:"closeEvent"},decls:127,vars:0,consts:[[1,"modal-backdrop",3,"click"],[1,"modal-content",3,"click"],[1,"close-btn",3,"click"],[1,"rules-section"],[1,"examples-grid"],[1,"example-card"],[1,"grid-display","block"],[1,"row"],[1,"cell","dead"],[1,"cell","live"],[1,"grid-display","blinker"],[1,"grid-display","glider"]],template:function(e,t){e&1&&(r(0,"div",0),E("click",function(){return t.close()}),r(1,"div",1),E("click",function(s){return s.stopPropagation()}),r(2,"button",2),E("click",function(){return t.close()}),l(3,"\xD7"),n(),r(4,"h2"),l(5,"Game of Life Rules"),n(),r(6,"div",3)(7,"p"),l(8,"The universe of the Game of Life is an infinite, two-dimensional orthogonal grid of square cells, each of which is in one of two possible states, live or dead."),n(),r(9,"ul")(10,"li")(11,"strong"),l(12,"Underpopulation:"),n(),l(13," Any live cell with fewer than two live neighbours dies."),n(),r(14,"li")(15,"strong"),l(16,"Survival:"),n(),l(17," Any live cell with two or three live neighbours lives on to the next generation."),n(),r(18,"li")(19,"strong"),l(20,"Overpopulation:"),n(),l(21," Any live cell with more than three live neighbours dies."),n(),r(22,"li")(23,"strong"),l(24,"Reproduction:"),n(),l(25," Any dead cell with exactly three live neighbours becomes a live cell."),n()()(),r(26,"h3"),l(27,"Examples"),n(),r(28,"div",4)(29,"div",5)(30,"h4"),l(31,"Still Life (Block)"),n(),r(32,"div",6)(33,"div",7),a(34,"div",8)(35,"div",8)(36,"div",8)(37,"div",8),n(),r(38,"div",7),a(39,"div",8)(40,"div",9)(41,"div",9)(42,"div",8),n(),r(43,"div",7),a(44,"div",8)(45,"div",9)(46,"div",9)(47,"div",8),n(),r(48,"div",7),a(49,"div",8)(50,"div",8)(51,"div",8)(52,"div",8),n()(),r(53,"p"),l(54,"Static, does not change."),n()(),r(55,"div",5)(56,"h4"),l(57,"Oscillator (Blinker)"),n(),r(58,"div",10)(59,"div",7),a(60,"div",8)(61,"div",8)(62,"div",8)(63,"div",8)(64,"div",8),n(),r(65,"div",7),a(66,"div",8)(67,"div",8)(68,"div",9)(69,"div",8)(70,"div",8),n(),r(71,"div",7),a(72,"div",8)(73,"div",8)(74,"div",9)(75,"div",8)(76,"div",8),n(),r(77,"div",7),a(78,"div",8)(79,"div",8)(80,"div",9)(81,"div",8)(82,"div",8),n(),r(83,"div",7),a(84,"div",8)(85,"div",8)(86,"div",8)(87,"div",8)(88,"div",8),n()(),r(89,"p"),l(90,"Period 2. Switches between vertical and horizontal."),n()(),r(91,"div",5)(92,"h4"),l(93,"Spaceship (Glider)"),n(),r(94,"div",11)(95,"div",7),a(96,"div",8)(97,"div",9)(98,"div",8)(99,"div",8)(100,"div",8),n(),r(101,"div",7),a(102,"div",8)(103,"div",8)(104,"div",9)(105,"div",8)(106,"div",8),n(),r(107,"div",7),a(108,"div",9)(109,"div",9)(110,"div",9)(111,"div",8)(112,"div",8),n(),r(113,"div",7),a(114,"div",8)(115,"div",8)(116,"div",8)(117,"div",8)(118,"div",8),n(),r(119,"div",7),a(120,"div",8)(121,"div",8)(122,"div",8)(123,"div",8)(124,"div",8),n()(),r(125,"p"),l(126,"Moves across the grid."),n()()()()())},dependencies:[_],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{background:#1a1a1a;color:#eee;padding:2rem;border-radius:12px;border:1px solid #333;max-width:800px;width:90%;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 10px 30px #00000080}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:transparent;border:none;color:#aaa;font-size:2rem;cursor:pointer;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#fff}h2[_ngcontent-%COMP%]{margin-top:0;color:#f0c}ul[_ngcontent-%COMP%]{line-height:1.6}li[_ngcontent-%COMP%]{margin-bottom:.5rem}.examples-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem;margin-top:2rem}.example-card[_ngcontent-%COMP%]{background:#222;padding:1rem;border-radius:8px;text-align:center}.grid-display[_ngcontent-%COMP%]{display:inline-block;background:#000;padding:2px;margin:1rem 0}.row[_ngcontent-%COMP%]{display:flex}.cell[_ngcontent-%COMP%]{width:10px;height:10px;border:1px solid #333;margin:1px}.cell.live[_ngcontent-%COMP%]{background:#f0c}.cell.dead[_ngcontent-%COMP%]{background:transparent}@keyframes _ngcontent-%COMP%_blink{0%,49%{opacity:1}50%,to{opacity:0}}"]})};var N=["gameCanvas"],H=["canvasWrapper"];function F(v,i){if(v&1){let e=b();p(0,"app-game-rules-modal",12),h("closeEvent",function(){d(e);let o=R();return m(o.showRules=!1)}),c()}}var I=class v{constructor(i){this.platformId=i}canvasRef;wrapperRef;showRules=!1;ctx;animationId=null;cellSize=10;cols=0;rows=0;grid=[];nextGrid=[];isDragging=!1;drawMode=!0;isPlaying=!1;generation=0;population=0;speed=100;lastFrameTime=0;ngOnInit(){V(this.platformId)&&(this.ctx=this.canvasRef.nativeElement.getContext("2d"),this.resize(),this.randomize(),this.draw())}ngOnDestroy(){this.stop()}onResize(){this.resize(),this.draw()}onMouseDown(i){this.isDragging=!0;let{x:e,y:t}=this.getGridCoordinates(i);this.isValidGrid(e,t)&&(this.grid[e][t]=!this.grid[e][t],this.drawMode=this.grid[e][t],this.draw(),this.countPopulation())}onMouseMove(i){if(!this.isDragging)return;let{x:e,y:t}=this.getGridCoordinates(i);this.isValidGrid(e,t)&&this.grid[e][t]!==this.drawMode&&(this.grid[e][t]=this.drawMode,this.draw(),this.countPopulation())}onMouseUp(){this.isDragging=!1}getGridCoordinates(i){let e=this.canvasRef.nativeElement.getBoundingClientRect(),t=Math.floor((i.clientX-e.left)/this.cellSize),o=Math.floor((i.clientY-e.top)/this.cellSize);return{x:t,y:o}}isValidGrid(i,e){return i>=0&&i<this.cols&&e>=0&&e<this.rows}resize(){let i=this.wrapperRef.nativeElement,e=i.clientWidth,t=i.clientHeight;this.canvasRef.nativeElement.width=e,this.canvasRef.nativeElement.height=t,this.cols=Math.floor(e/this.cellSize),this.rows=Math.floor(t/this.cellSize),(this.grid.length!==this.cols||this.grid[0]&&this.grid[0].length!==this.rows)&&(this.initGrid(),this.randomize())}initGrid(){this.grid=new Array(this.cols).fill(null).map(()=>new Array(this.rows).fill(!1)),this.nextGrid=new Array(this.cols).fill(null).map(()=>new Array(this.rows).fill(!1))}randomize(){for(let i=0;i<this.cols;i++)for(let e=0;e<this.rows;e++)this.grid[i][e]=Math.random()>.85;this.generation=0,this.countPopulation(),this.draw()}reset(){this.stop(),this.initGrid(),this.generation=0,this.population=0,this.draw()}togglePlay(){this.isPlaying?this.stop():this.start()}start(){this.isPlaying||(this.isPlaying=!0,this.animate())}stop(){this.isPlaying=!1,this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null)}onSpeedChange(i){let e=i.target;this.speed=Number(e.value)}animate(i=0){if(!this.isPlaying)return;i-this.lastFrameTime>=this.speed&&(this.computeNextGen(),this.draw(),this.lastFrameTime=i),this.animationId=requestAnimationFrame(t=>this.animate(t))}computeNextGen(){for(let e=0;e<this.cols;e++)for(let t=0;t<this.rows;t++){let o=this.grid[e][t],s=this.countNeighbors(e,t);o&&(s<2||s>3)?this.nextGrid[e][t]=!1:!o&&s===3?this.nextGrid[e][t]=!0:this.nextGrid[e][t]=o}let i=this.grid;this.grid=this.nextGrid,this.nextGrid=i,this.generation++,this.countPopulation()}countNeighbors(i,e){let t=0;for(let o=-1;o<2;o++)for(let s=-1;s<2;s++){if(o===0&&s===0)continue;let f=(i+o+this.cols)%this.cols,D=(e+s+this.rows)%this.rows;this.grid[f][D]&&t++}return t}countPopulation(){let i=0;for(let e=0;e<this.cols;e++)for(let t=0;t<this.rows;t++)this.grid[e][t]&&i++;this.population=i}draw(){this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.canvasRef.nativeElement.width,this.canvasRef.nativeElement.height),this.ctx.lineWidth=.5,this.ctx.strokeStyle="#222",this.ctx.beginPath();for(let i=0;i<=this.cols;i++){let e=i*this.cellSize;this.ctx.moveTo(e,0),this.ctx.lineTo(e,this.canvasRef.nativeElement.height)}for(let i=0;i<=this.rows;i++){let e=i*this.cellSize;this.ctx.moveTo(0,e),this.ctx.lineTo(this.canvasRef.nativeElement.width,e)}this.ctx.stroke(),this.ctx.fillStyle="#ff00cc";for(let i=0;i<this.cols;i++)for(let e=0;e<this.rows;e++)this.grid[i][e]&&this.ctx.fillRect(i*this.cellSize+1,e*this.cellSize+1,this.cellSize-2,this.cellSize-2)}static \u0275fac=function(e){return new(e||v)(G(O))};static \u0275cmp=g({type:v,selectors:[["app-game-of-life"]],viewQuery:function(e,t){if(e&1&&(C(N,7),C(H,7)),e&2){let o;y(o=M())&&(t.canvasRef=o.first),y(o=M())&&(t.wrapperRef=o.first)}},hostBindings:function(e,t){e&1&&h("resize",function(){return t.onResize()},P)},decls:21,vars:5,consts:[["canvasWrapper",""],["gameCanvas",""],[1,"game-container"],[1,"controls"],[3,"click"],[1,"speed-control"],["type","range","min","10","max","500","step","10",3,"input","value"],["title","How to Play",1,"icon-btn",3,"click"],[1,"stats"],[1,"canvas-wrapper"],[3,"mousedown","mousemove","mouseup","mouseleave"],[3,"closeEvent",4,"ngIf"],[3,"closeEvent"]],template:function(e,t){if(e&1){let o=b();p(0,"div",2)(1,"div",3)(2,"button",4),h("click",function(){return d(o),m(t.togglePlay())}),l(3),c(),p(4,"button",4),h("click",function(){return d(o),m(t.reset())}),l(5,"Reset"),c(),p(6,"button",4),h("click",function(){return d(o),m(t.randomize())}),l(7,"Randomize"),c(),p(8,"div",5)(9,"label"),l(10,"Speed: "),c(),p(11,"input",6),h("input",function(f){return d(o),m(t.onSpeedChange(f))}),c()(),p(12,"button",7),h("click",function(){return d(o),m(t.showRules=!0)}),l(13,"\u2753"),c(),p(14,"div",8),l(15),c()(),p(16,"div",9,0)(18,"canvas",10,1),h("mousedown",function(f){return d(o),m(t.onMouseDown(f))})("mousemove",function(f){return d(o),m(t.onMouseMove(f))})("mouseup",function(){return d(o),m(t.onMouseUp())})("mouseleave",function(){return d(o),m(t.onMouseUp())}),c()(),k(20,F,1,0,"app-game-rules-modal",11),c()}e&2&&(u(3),T(t.isPlaying?"Pause":"Start"),u(8),x("value",t.speed),u(4),L(" Generation: ",t.generation," | Population: ",t.population," "),u(5),x("ngIf",t.showRules))},dependencies:[_,z,w],styles:["[_nghost-%COMP%]{display:block;width:100%;height:calc(100vh - 80px);min-height:500px;position:relative;background:#111;overflow:hidden}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.controls[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;background:#000c;align-items:center;justify-content:center;flex-wrap:wrap;z-index:10;border-bottom:1px solid #333}button[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f0c,#33f);border:none;padding:.5rem 1.5rem;border-radius:20px;color:#fff;font-weight:700;cursor:pointer;transition:opacity .2s}button[_ngcontent-%COMP%]:hover{opacity:.9}.speed-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#fff}.stats[_ngcontent-%COMP%]{color:#fff;font-family:monospace;margin-left:1rem}.canvas-wrapper[_ngcontent-%COMP%]{flex:1;width:100%;height:100%;overflow:hidden;position:relative}canvas[_ngcontent-%COMP%]{display:block}"]})};export{I as GameOfLifeComponent};
