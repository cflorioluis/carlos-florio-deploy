import{s as w}from"./chunk-K7YEKGTU.js";import{Qb as r,Rb as s,Sb as g,ab as a,ac as m,bb as d,gc as f,hc as p,ic as y,rb as c,rc as n,tc as l}from"./chunk-LZGG6COP.js";import"./chunk-2WH2EVR6.js";var v=["gameCanvas"],x=class u{canvasRef;ctx;width=800;height=400;groundHeight=50;gravity=.6;gameSpeed=5;runner={x:50,y:0,width:40,height:60,dy:0,jumpForce:12,grounded:!0,ducking:!1};obstacles=[];score=0;highScore=0;gameInterval;isGameOver=!1;isPaused=!1;hasStarted=!1;spawnTimer=0;colors={bg:"#0d1117",ground:"#30363d",runner:"#238636",bug:"#da3633",firewall:"#d29922",text:"#c9d1d9"};ngOnInit(){this.initGame()}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d"),this.draw()}ngOnDestroy(){this.stopGame()}initGame(){this.score=0,this.gameSpeed=5,this.isGameOver=!1,this.isPaused=!1,this.hasStarted=!1,this.obstacles=[],this.runner.y=this.height-this.groundHeight-this.runner.height,this.runner.dy=0,this.runner.grounded=!0,this.runner.ducking=!1,this.ctx&&this.draw()}startGame(){this.hasStarted||(this.hasStarted=!0,this.gameInterval=setInterval(()=>this.update(),16))}stopGame(){this.gameInterval&&(clearInterval(this.gameInterval),this.gameInterval=null)}keyDownHandler(e){if(["ArrowUp","ArrowDown"," "].includes(e.key)&&e.preventDefault(),!this.hasStarted&&["ArrowUp","ArrowDown"," "].includes(e.key)&&this.startGame(),this.isGameOver&&e.key==="Enter"){this.initGame(),this.startGame();return}e.key===" "||e.key==="ArrowUp"?this.jump():e.key==="ArrowDown"&&this.duck(!0)}keyUpHandler(e){e.key==="ArrowDown"&&this.duck(!1)}jump(){this.runner.grounded&&(this.runner.dy=-this.runner.jumpForce,this.runner.grounded=!1)}duck(e){this.runner.ducking=e,e?(this.runner.height=30,this.runner.grounded&&(this.runner.y=this.height-this.groundHeight-30)):(this.runner.height=60,this.runner.grounded&&(this.runner.y=this.height-this.groundHeight-60))}update(){if(this.isPaused||this.isGameOver)return;this.runner.grounded||(this.runner.dy+=this.gravity,this.runner.y+=this.runner.dy);let e=this.height-this.groundHeight-this.runner.height;this.runner.y>=e?(this.runner.y=e,this.runner.dy=0,this.runner.grounded=!0):this.runner.grounded=!1,this.spawnTimer++,this.spawnTimer>100-this.gameSpeed*2&&(this.spawnObstacle(),this.spawnTimer=0);for(let t=this.obstacles.length-1;t>=0;t--){let i=this.obstacles[t];i.x-=this.gameSpeed,this.runner.x<i.x+i.width&&this.runner.x+this.runner.width>i.x&&this.runner.y<i.y+i.height&&this.runner.y+this.runner.height>i.y&&this.gameOver(),i.x+i.width<0&&(this.obstacles.splice(t,1),this.score++,this.score%10===0&&(this.gameSpeed+=.5))}this.draw()}spawnObstacle(){let e=Math.random()>.6?"firewall":"bug",t;e==="bug"?t={x:this.width,y:this.height-this.groundHeight-40,width:40,height:40,type:"bug",speed:this.gameSpeed}:t={x:this.width,y:this.height-this.groundHeight-90,width:50,height:30,type:"firewall",speed:this.gameSpeed},this.obstacles.push(t)}gameOver(){this.isGameOver=!0,this.score>this.highScore&&(this.highScore=this.score),this.stopGame(),this.draw()}draw(){this.ctx.fillStyle=this.colors.bg,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle=this.colors.ground,this.ctx.fillRect(0,this.height-this.groundHeight,this.width,this.groundHeight),this.ctx.fillStyle=this.colors.runner,this.ctx.fillRect(this.runner.x,this.runner.y,this.runner.width,this.runner.height),this.obstacles.forEach(e=>{this.ctx.fillStyle=e.type==="bug"?this.colors.bug:this.colors.firewall,this.ctx.fillRect(e.x,e.y,e.width,e.height)}),this.ctx.fillStyle=this.colors.text,this.ctx.font="20px Courier New",this.ctx.fillText(`Score: ${this.score}`,20,30),this.ctx.fillText(`High Score: ${this.highScore}`,20,60),!this.hasStarted&&!this.isGameOver?this.drawOverlay("GIT RUNNER","Press Space/Up to Jump, Down to Duck"):this.isGameOver&&this.drawOverlay("MERGE CONFLICT","Press Enter to Restart")}drawOverlay(e,t){this.ctx.fillStyle="rgba(13, 17, 23, 0.8)",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.fillStyle=this.colors.text,this.ctx.font="30px Courier New",this.ctx.textAlign="center",this.ctx.fillText(e,this.width/2,this.height/2-20),this.ctx.font="16px Courier New",this.ctx.fillText(t,this.width/2,this.height/2+20)}static \u0275fac=function(t){return new(t||u)};static \u0275cmp=c({type:u,selectors:[["app-git-runner"]],viewQuery:function(t,i){if(t&1&&f(v,7),t&2){let h;p(h=y())&&(i.canvasRef=h.first)}},hostBindings:function(t,i){t&1&&m("keydown",function(o){return i.keyDownHandler(o)},a)("keyup",function(o){return i.keyUpHandler(o)},a)},decls:19,vars:2,consts:[["gameCanvas",""],[1,"game-wrapper"],[1,"game-header"],[1,"stat"],["width","800","height","400"],[1,"controls-hint"],[2,"color","#da3633"],[2,"color","#d29922"]],template:function(t,i){t&1&&(r(0,"div",1)(1,"div",2)(2,"div",3),n(3),s(),r(4,"div",3),n(5),s()(),g(6,"canvas",4,0),r(8,"div",5)(9,"p"),n(10,"Use \u2B06\uFE0F or SPACE to Jump. \u2B07\uFE0F to Duck."),s(),r(11,"p"),n(12,"Avoid Bugs ("),r(13,"span",6),n(14,"\u25A0"),s(),n(15,") and Firewalls ("),r(16,"span",7),n(17,"\u25A0"),s(),n(18,")!"),s()()()),t&2&&(d(3),l("COMMITS: ",i.score),d(2),l("BEST STREAK: ",i.highScore))},dependencies:[w],styles:[".game-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background-color:#0d1117;color:#c9d1d9;font-family:Courier New,Courier,monospace}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:800px;margin-bottom:1rem;font-weight:700}canvas[_ngcontent-%COMP%]{border:2px solid #30363d;background-color:#0d1117;box-shadow:0 0 20px #00000080}.controls-hint[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-size:.9rem;color:#8b949e}.controls-hint[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}"]})};export{x as GitRunnerComponent};
