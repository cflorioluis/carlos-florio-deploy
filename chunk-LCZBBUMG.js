import{s as u}from"./chunk-K7YEKGTU.js";import{Qb as s,Rb as n,Sb as f,ab as m,ac as y,bb as r,gc as v,hc as g,ic as p,rb as c,rc as i,tc as h}from"./chunk-LZGG6COP.js";import{a as d}from"./chunk-2WH2EVR6.js";var E=["gameCanvas"],x=class l{canvasRef;ctx;gridSize=20;tileCount=20;speed=100;snake=[];food={x:15,y:15};velocity={x:0,y:0};score=0;highScore=0;gameInterval;isGameOver=!1;isPaused=!1;hasStarted=!1;colors={bg:"#0d1117",snakeHead:"#238636",snakeBody:"#2ea043",food:"#f78166",text:"#c9d1d9",grid:"#21262d"};ngOnInit(){this.initGame()}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d"),this.draw()}ngOnDestroy(){this.stopGame()}initGame(){this.snake=[{x:10,y:10}],this.velocity={x:0,y:0},this.score=0,this.isGameOver=!1,this.isPaused=!1,this.hasStarted=!1,this.spawnFood(),this.ctx&&this.draw()}startGame(){this.hasStarted||(this.hasStarted=!0,this.velocity={x:1,y:0},this.gameInterval=setInterval(()=>this.update(),this.speed))}stopGame(){this.gameInterval&&(clearInterval(this.gameInterval),this.gameInterval=null)}handleInput(e){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(e.key)&&e.preventDefault(),!this.hasStarted&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&this.startGame(),this.isGameOver&&e.key==="Enter"){this.initGame(),this.startGame();return}switch(e.key){case"ArrowUp":if(this.velocity.y===1)break;this.velocity={x:0,y:-1};break;case"ArrowDown":if(this.velocity.y===-1)break;this.velocity={x:0,y:1};break;case"ArrowLeft":if(this.velocity.x===1)break;this.velocity={x:-1,y:0};break;case"ArrowRight":if(this.velocity.x===-1)break;this.velocity={x:1,y:0};break;case" ":this.togglePause();break}}togglePause(){!this.hasStarted||this.isGameOver||(this.isPaused=!this.isPaused,this.isPaused?this.stopGame():this.gameInterval=setInterval(()=>this.update(),this.speed))}update(){if(this.isPaused||this.isGameOver)return;let e=d({},this.snake[0]);if(e.x+=this.velocity.x,e.y+=this.velocity.y,e.x<0||e.x>=this.tileCount||e.y<0||e.y>=this.tileCount){this.gameOver();return}for(let t=0;t<this.snake.length;t++)if(e.x===this.snake[t].x&&e.y===this.snake[t].y){this.gameOver();return}this.snake.unshift(e),e.x===this.food.x&&e.y===this.food.y?(this.score+=10,this.score>this.highScore&&(this.highScore=this.score),this.spawnFood()):this.snake.pop(),this.draw()}spawnFood(){this.food={x:Math.floor(Math.random()*this.tileCount),y:Math.floor(Math.random()*this.tileCount)};for(let e of this.snake)if(e.x===this.food.x&&e.y===this.food.y){this.spawnFood();break}}gameOver(){this.isGameOver=!0,this.stopGame(),this.draw()}draw(){this.ctx.fillStyle=this.colors.bg,this.ctx.fillRect(0,0,this.canvasRef.nativeElement.width,this.canvasRef.nativeElement.height),this.ctx.fillStyle=this.colors.food,this.ctx.fillRect(this.food.x*this.gridSize,this.food.y*this.gridSize,this.gridSize-2,this.gridSize-2),this.ctx.fillStyle=this.colors.snakeBody;for(let e=0;e<this.snake.length;e++)e===0?this.ctx.fillStyle=this.colors.snakeHead:this.ctx.fillStyle=this.colors.snakeBody,this.ctx.fillRect(this.snake[e].x*this.gridSize,this.snake[e].y*this.gridSize,this.gridSize-2,this.gridSize-2);this.hasStarted?this.isGameOver?this.drawOverlay("STACK OVERFLOW","Press Enter to Restart"):this.isPaused&&this.drawOverlay("PAUSED","Press Space to Resume"):this.drawOverlay("MEMORY LEAK","Press Arrow Keys to Start")}drawOverlay(e,t){this.ctx.fillStyle="rgba(13, 17, 23, 0.8)",this.ctx.fillRect(0,0,this.canvasRef.nativeElement.width,this.canvasRef.nativeElement.height),this.ctx.fillStyle=this.colors.text,this.ctx.font="30px Courier New",this.ctx.textAlign="center",this.ctx.fillText(e,this.canvasRef.nativeElement.width/2,this.canvasRef.nativeElement.height/2-20),this.ctx.font="16px Courier New",this.ctx.fillText(t,this.canvasRef.nativeElement.width/2,this.canvasRef.nativeElement.height/2+20)}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=c({type:l,selectors:[["app-memory-leak"]],viewQuery:function(t,a){if(t&1&&v(E,7),t&2){let o;g(o=p())&&(a.canvasRef=o.first)}},hostBindings:function(t,a){t&1&&y("keydown",function(w){return a.handleInput(w)},m)},decls:21,vars:2,consts:[["gameCanvas",""],[1,"game-wrapper"],[1,"game-header"],[1,"stat"],["width","400","height","400"],[1,"controls-hint"],[2,"color","#f78166"],[2,"color","#2ea043"]],template:function(t,a){t&1&&(s(0,"div",1)(1,"div",2)(2,"div",3),i(3),n(),s(4,"div",3),i(5),n()(),f(6,"canvas",4,0),s(8,"div",5)(9,"p"),i(10,"Use \u2B06\uFE0F\u2B07\uFE0F\u2B05\uFE0F\u27A1\uFE0F to move. SPACE to pause."),n(),s(11,"p"),i(12,"Collect "),s(13,"span",6),i(14,"\u25A0"),n(),i(15," to free memory."),n(),s(16,"p"),i(17,"Avoid "),s(18,"span",7),i(19,"\u25A0"),n(),i(20," (yourself) and walls."),n()()()),t&2&&(r(3),h("MEMORY FREED: ",a.score," bytes"),r(2),h("HIGH SCORE: ",a.highScore," bytes"))},dependencies:[u],styles:[".game-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background-color:#0d1117;color:#c9d1d9;font-family:Courier New,Courier,monospace}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:400px;margin-bottom:1rem;font-weight:700}canvas[_ngcontent-%COMP%]{border:2px solid #30363d;background-color:#0d1117;box-shadow:0 0 20px #00000080}.controls-hint[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-size:.9rem;color:#8b949e}.controls-hint[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}"]})};export{x as MemoryLeakComponent};
